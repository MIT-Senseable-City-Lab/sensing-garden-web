{% extends "base.html" %}

{% block title %}Sensing Garden Dashboard - Detections{% endblock %}

{% from "table.html" import render_table, table_scripts %}

{% block content %}
<div class="container">
    <h1>Sensor Detections</h1>
    <p>Showing the most recent detection data from DynamoDB.</p>
    
    {% if items %}
    {% set display_fields = fields + ['formatted_time'] if 'formatted_time' not in fields else fields %}
    {{ render_table('detectionsTable', items, display_fields, url_for('download_csv', table_type='detections'), pagination) }}
    {% else %}
    <div class="alert alert-info">
        No detection data found. Try running the test script to generate some data.
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
    {{ table_scripts('detectionsTable') }}
{% endblock %}
